@page "/components/colorpicker"
@using System.Linq
@using MudBlazor

<MudGrid>
    <!-- Left: all variants — Start adornment -->
    <MudItem xs="12" md="4">
        <MudText Typo="Typo.subtitle1" Class="mb-2">Start adornment</MudText>
        <MudStack Spacing="4">
            @foreach (var variant in Enum.GetValues(typeof(Variant)).Cast<Variant>())
            {
                <MudColorPicker @bind-Text="_colorStart" Variant="variant" Label="@variant.ToString()"
                    Margin="@ComputedMargin" Disabled="@_disabled" ReadOnly="@_readonly"
                    Placeholder="@(_placeholder ? "Select color" : null)" HelperText="@(_helperText ? "Helper Text" : null)"
                    HelperTextOnFocus="@_helperTextOnFocus" Clearable="@_clearable" Error="@_hasError"
                    ErrorText="Please pick a color" Immediate="true" ShrinkLabel="@_shrinkLabel" Adornment="Adornment.Start"
                    AdornmentIcon="@Icons.Material.Filled.Palette" Style="@($"color: {_colorStart};")" />
            }
        </MudStack>
    </MudItem>

    <!-- Middle: all variants — End adornment -->
    <MudItem xs="12" md="4">
        <MudText Typo="Typo.subtitle1" Class="mb-2">End adornment</MudText>
        <MudStack Spacing="4">
            @foreach (var variant in Enum.GetValues(typeof(Variant)).Cast<Variant>())
            {
                <MudColorPicker @bind-Text="_colorEnd" Variant="variant" Label="@($"{variant} (End)")"
                    Margin="@ComputedMargin" Disabled="@_disabled" ReadOnly="@_readonly"
                    Placeholder="@(_placeholder ? "Select color" : null)" HelperText="@(_helperText ? "Helper Text" : null)"
                    HelperTextOnFocus="@_helperTextOnFocus" Clearable="@_clearable" Error="@_hasError"
                    ErrorText="Please pick a color" Immediate="true" ShrinkLabel="@_shrinkLabel" Adornment="Adornment.End"
                    AdornmentIcon="@Icons.Material.Filled.Colorize" Style="@($"color: {_colorEnd};")" />
            }
        </MudStack>
    </MudItem>

    <!-- Right: extras + Margin picker -->
    <MudItem xs="12" md="4">
        <MudStack Spacing="3">
            <MudText Typo="Typo.subtitle1">Extras</MudText>

            <!-- Filled with label + helper -->
            <MudColorPicker Label="Filled + Helper" Variant="Variant.Filled" Margin="@ComputedMargin"
                HelperText="@(_helperText ? "Pick any color" : null)" Immediate="true" ShrinkLabel="@_shrinkLabel"
                Adornment="Adornment.Start" AdornmentIcon="@Icons.Material.Filled.InvertColors"
                @bind-Text="_colorExtra1" />

            <!-- Outlined with end text adornment -->
            <MudColorPicker Label="Outlined + End text" Variant="Variant.Outlined" Margin="@ComputedMargin"
                Clearable="@_clearable" Immediate="true" ShrinkLabel="@_shrinkLabel" Adornment="Adornment.End"
                AdornmentText="#" @bind-Text="_colorExtra2" />

            <!-- Margin selector (like your other demo) -->
            <MudSelect @bind-Value="_margin" Label="Margin">
                @foreach (var m in Enum.GetValues(typeof(Margin)).Cast<Margin>())
                {
                    <MudSelectItem Value="m">@m</MudSelectItem>
                }
            </MudSelect>
        </MudStack>
    </MudItem>
</MudGrid>

<!-- Controls row (same knobs as the TextField page) -->
<MudStack Class="mt-5" Row="true" Spacing="3">
    <MudSwitch @bind-Value="_dense" Label="Dense" Color="Color.Primary" />
    <MudSwitch @bind-Value="_readonly" Label="ReadOnly" Color="Color.Primary" />
    <MudSwitch @bind-Value="_disabled" Label="Disabled" Color="Color.Primary" />
    <MudSwitch @bind-Value="_placeholder" Label="Placeholder" Color="Color.Primary" />
    <MudSwitch @bind-Value="_helperText" Label="HelperText" Color="Color.Primary" />
    <MudSwitch @bind-Value="_helperTextOnFocus" Label="HelperTextOnFocus" Color="Color.Primary" />
    <MudSwitch @bind-Value="_clearable" Label="Clearable" Color="Color.Primary" />
    <MudSwitch @bind-Value="_hasError" Label="Show Error" Color="Color.Error" />
    <MudSwitch @bind-Value="_shrinkLabel" Label="ShrinkLabel" Color="Color.Primary" />
</MudStack>

<MudDivider Class="my-6" />

<MudText Typo="Typo.h6">Picker panel</MudText>

<MudGrid Gutter="Size.Medium" Class="mt-2">
    <MudItem md="8" Class="d-flex justify-center">
        <MudColorPicker PickerVariant="PickerVariant.Static" @bind-Text="_panelColor" ShowToolbar="@ShowToolbar"
            ShowAlpha="@ShowAlpha" ShowColorField="@ShowColorField" ShowPreview="@ShowPreview"
            ShowSliders="@ShowSliders" ShowInputs="@ShowInputs" ShowModeSwitch="@ShowModeSwitch"
            ColorPickerMode="@ColorPickerMode" />
    </MudItem>

    <MudItem md="4">
        <MudPaper Height="400px" Class="px-4 pt-2 pb-4">
            <MudText Typo="Typo.h6">Options</MudText>

            <MudCheckBox @bind-Value="ShowToolbar" Label="Show Toolbar" Color="Color.Primary" Dense="true" />
            <MudCheckBox @bind-Value="ShowAlpha" Label="Show Alpha" Color="Color.Primary" Dense="true" />
            <MudCheckBox @bind-Value="ShowColorField" Label="Show Color Field" Color="Color.Primary" Dense="true" />
            <MudCheckBox @bind-Value="ShowPreview" Label="Show Preview" Color="Color.Primary" Dense="true" />
            <MudCheckBox @bind-Value="ShowSliders" Label="Show Sliders" Color="Color.Primary" Dense="true" />
            <MudCheckBox @bind-Value="ShowInputs" Label="Show Inputs" Color="Color.Primary" Dense="true" />
            <MudCheckBox @bind-Value="ShowModeSwitch" Label="Show Mode Switch" Color="Color.Primary" Dense="true" />

            <MudSelect Label="Color Picker Mode" Variant="Variant.Outlined" Dense="true" Margin="Margin.Dense"
                @bind-Value="ColorPickerMode" Class="mt-4">
                <MudSelectItem T="ColorPickerMode" Value="ColorPickerMode.RGB">RGB</MudSelectItem>
                <MudSelectItem T="ColorPickerMode" Value="ColorPickerMode.HSL">HSL</MudSelectItem>
                <MudSelectItem T="ColorPickerMode" Value="ColorPickerMode.HEX">HEX</MudSelectItem>
            </MudSelect>

            <MudText Class="mt-3" Typo="Typo.caption">Selected: @_panelColor</MudText>
        </MudPaper>
    </MudItem>
</MudGrid>


@code {
    // values
    private string? _colorStart;
    private string? _colorEnd;
    private string? _colorExtra1;
    private string? _colorExtra2;

    // switches (mirroring the TextField sample)
    private bool _dense, _disabled, _readonly, _placeholder, _helperText, _helperTextOnFocus, _clearable, _hasError,
    _shrinkLabel;

    // margin selection + computed margin honoring "Dense"
    private Margin _margin = Margin.None;
    private Margin ComputedMargin => _dense ? Margin.Dense : _margin;

    private string? _panelColor;

    public bool ShowToolbar { get; set; } = true;
    public bool ShowAlpha { get; set; } = true;
    public bool ShowColorField { get; set; } = true;
    public bool ShowPreview { get; set; } = true;
    public bool ShowSliders { get; set; } = true;
    public bool ShowInputs { get; set; } = true;
    public bool ShowModeSwitch { get; set; } = true;

    public ColorPickerMode ColorPickerMode { get; set; } = ColorPickerMode.RGB;

}
