@page "/components/numericfield"
@using MudBlazor
@using System.Globalization

<MudGrid Gutter="Size.Medium">

    <!-- LEFT: Start adornment (all variants) -->
    <MudItem xs="12" md="4">
        <MudText Typo="Typo.subtitle1" Class="mb-2">Start adornment</MudText>
        <MudStack Spacing="4">
            @foreach (var variant in Enum.GetValues(typeof(Variant)).Cast<Variant>())
            {
                <MudNumericField T="decimal"
                                 @bind-Value="_numStart"
                                 Variant="variant"
                                 Label="@variant.ToString()"
                                 Margin="@ComputedMargin"
                                 ReadOnly="@_readOnly"
                                 Disabled="@_disabled"
                                 Clearable="@_clearable"
                                 Immediate="true"
                                 Placeholder="@(_placeholder ? "Enter number" : null)"
                                 HelperText="@(_helperText ? "Helper Text" : null)"
                                 HelperTextOnFocus="@_helperOnFocus"
                                 Error="@_hasError"
                                 ErrorText="Please enter a number"
                                 ShrinkLabel="@_shrinkLabel"
                                 Adornment="Adornment.Start"
                                 AdornmentIcon="@Icons.Material.Filled.AttachMoney" />
            }
        </MudStack>
    </MudItem>

    <!-- MIDDLE: End adornment (all variants) -->
    <MudItem xs="12" md="4">
        <MudText Typo="Typo.subtitle1" Class="mb-2">End adornment</MudText>
        <MudStack Spacing="4">
            @foreach (var variant in Enum.GetValues(typeof(Variant)).Cast<Variant>())
            {
                <MudNumericField T="decimal"
                                 @bind-Value="_numEnd"
                                 Variant="variant"
                                 Label="@($"{variant} (End)")"
                                 Margin="@ComputedMargin"
                                 ReadOnly="@_readOnly"
                                 Disabled="@_disabled"
                                 Clearable="@_clearable"
                                 Immediate="true"
                                 Placeholder="@(_placeholder ? "Enter number" : null)"
                                 HelperText="@(_helperText ? "Helper Text" : null)"
                                 HelperTextOnFocus="@_helperOnFocus"
                                 Error="@_hasError"
                                 ErrorText="Please enter a number"
                                 ShrinkLabel="@_shrinkLabel"
                                 Adornment="Adornment.End"
                                 AdornmentIcon="@Icons.Material.Filled.ArrowForward" />
            }
        </MudStack>
    </MudItem>

    <!-- RIGHT: Extras + margin/limits -->
    <MudItem xs="12" md="4">
        <MudText Typo="Typo.subtitle1" Class="mb-2">Extras</MudText>
        <MudStack Spacing="3">

            <!-- Currency-ish (start icon) -->
            <MudNumericField T="decimal"
                             Label="Amount"
                             @bind-Value="_numCurrency"
                             Variant="Variant.Filled"
                             Margin="@ComputedMargin"
                             ReadOnly="@_readOnly"
                             Disabled="@_disabled"
                             Clearable="@_clearable"
                             Immediate="true"
                             HelperText="@(_helperText ? "Enter an amount" : null)"
                             HelperTextOnFocus="@_helperOnFocus"
                             ShrinkLabel="@_shrinkLabel"
                             Adornment="Adornment.Start"
                             AdornmentIcon="@Icons.Material.Filled.Payments" />

            <!-- Percent (end text) -->
            <MudNumericField T="decimal"
                             Label="Percent"
                             @bind-Value="_numPercent"
                             Variant="Variant.Outlined"
                             Margin="@ComputedMargin"
                             ReadOnly="@_readOnly"
                             Disabled="@_disabled"
                             Clearable="@_clearable"
                             Immediate="true"
                             HelperText="@(_helperText ? "0 - 100" : null)"
                             HelperTextOnFocus="@_helperOnFocus"
                             ShrinkLabel="@_shrinkLabel"
                             Min="0" Max="100" Step="1"
                             Adornment="Adornment.End"
                             AdornmentText="%" />

            <!-- Min/Max/Step demo -->
            <MudNumericField T="decimal"
                             Label="Limited (Min/Max/Step)"
                             @bind-Value="_numLimited"
                             Variant="Variant.Outlined"
                             Margin="@ComputedMargin"
                             ReadOnly="@_readOnly"
                             Disabled="@_disabled"
                             Clearable="@_clearable"
                             Immediate="true"
                             HelperText="@(_helperText ? $"Range: {_min} â€“ {_max}, step {_step}" : null)"
                             HelperTextOnFocus="@_helperOnFocus"
                             ShrinkLabel="@_shrinkLabel"
                             Min="@_min" Max="@_max" Step="@_step" />

            <!-- Controls for limits -->
            <MudPaper Class="pa-3 mt-2">
                <MudText Typo="Typo.subtitle2">Limits</MudText>
                <MudStack Row Spacing="2" AlignItems="AlignItems.Center" Class="controls-stack">
                    <MudNumericField T="decimal" Label="Min"   Dense="true" Immediate="true" @bind-Value="_min"  Style="max-width:140px;" />
                    <MudNumericField T="decimal" Label="Max"   Dense="true" Immediate="true" @bind-Value="_max"  Style="max-width:140px;" />
                    <MudNumericField T="decimal" Label="Step"  Dense="true" Immediate="true" @bind-Value="_step" Style="max-width:140px;" />
                </MudStack>

                <MudSelect T="Margin" @bind-Value="_margin" Label="Margin" Dense="true" Class="mt-3" Style="max-width:220px;">
                    <MudSelectItem Value="Margin.None">None</MudSelectItem>
                    <MudSelectItem Value="Margin.Dense">Dense</MudSelectItem>
                    <MudSelectItem Value="Margin.Normal">Normal</MudSelectItem>
                </MudSelect>
            </MudPaper>
        </MudStack>
    </MudItem>
</MudGrid>

<!-- ===== Wrapped top-level controls (like your other demos) ===== -->
<MudDivider Class="my-6" />
<MudText Typo="Typo.subtitle1">Controls</MudText>

<MudPaper Class="pa-3 mt-2">
    <MudStack Row Spacing="2" AlignItems="AlignItems.Center" Class="controls-stack">
        <MudSwitch Class="control-item" @bind-Value="_dense" Label="Dense" Color="Color.Primary" />
        <MudSwitch Class="control-item" @bind-Value="_readOnly" Label="ReadOnly" Color="Color.Primary" />
        <MudSwitch Class="control-item" @bind-Value="_disabled" Label="Disabled" Color="Color.Primary" />
        <MudSwitch Class="control-item" @bind-Value="_placeholder" Label="Placeholder" Color="Color.Primary" />
        <MudSwitch Class="control-item" @bind-Value="_helperText" Label="HelperText" Color="Color.Primary" />
        <MudSwitch Class="control-item" @bind-Value="_helperOnFocus" Label="HelperTextOnFocus" Color="Color.Primary" />
        <MudSwitch Class="control-item" @bind-Value="_clearable" Label="Clearable" Color="Color.Primary" />
        <MudSwitch Class="control-item" @bind-Value="_hasError" Label="Show Error" Color="Color.Error" />
        <MudSwitch Class="control-item" @bind-Value="_shrinkLabel" Label="ShrinkLabel" Color="Color.Primary" />
    </MudStack>
</MudPaper>

<style>
  .controls-stack { display:flex; flex-wrap: wrap; }
  .controls-stack .control-item { min-width: 160px; }
</style>

@code {
    // demo values
    private decimal _numStart    = 0m;
    private decimal _numEnd      = 0m;
    private decimal _numCurrency = 123.45m;
    private decimal _numPercent  = 15m;
    private decimal _numLimited  = 10m;

    // global toggles
    private bool _dense;
    private bool _readOnly;
    private bool _disabled;
    private bool _placeholder;
    private bool _helperText;
    private bool _helperOnFocus;
    private bool _clearable = true;
    private bool _hasError;
    private bool _shrinkLabel;

    // margin (honor "Dense")
    private Margin _margin = Margin.None;
    private Margin ComputedMargin => _dense ? Margin.Dense : _margin;

    // limits for the limited field (editable via small controls)
    private decimal _min  = 0m;
    private decimal _max  = 100m;
    private decimal _step = 1m;
}
